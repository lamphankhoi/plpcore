[
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Purchase Invoice",
  "enabled": 1,
  "modified": "2021-03-12 02:25:58.204028",
  "name": "Purchase Invoice-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Purchase Invoice', {\r\n    refresh : function(frm) {\r\n\t\tset_lo(frm);\r\n        if (!has_common(frappe.user_roles, [\"Administrator\", \"System Manager\"])) {\r\n            setTimeout(() => {                      \r\n                var bt = ['Block Invoice', 'Payment Request', 'Payment', 'Subscription'];\r\n                bt.forEach(function(bt){\r\n                    frm.page.remove_inner_button(bt, 'Create');\r\n                });\r\n            },1);\r\n        }\r\n    },\r\n\tproduct:function(frm){\r\n\t\tset_head(frm);\r\n\t}\r\n});\r\nvar set_lo = function(frm){\r\nif(frm.doc.__islocal){\r\n\tvar u = frappe.session.user;\r\n\tfrappe.call({\r\n\t\tmethod:\"frappe.client.get\",\r\n\t\targs: {\r\n\t\tdoctype:\"User\",\r\n\t\tfilters: {'email': u\r\n\t\t},\r\n\t\t},\r\n\tcallback: function(r) {\r\n\t\tcur_frm.set_value(\"prepared_by\", r.message[\"full_name\"]);\r\n\t}\r\n    });\r\n}\r\n};",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Sales Invoice",
  "enabled": 1,
  "modified": "2021-03-12 08:04:52.709385",
  "name": "Sales Invoice-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Sales Invoice', {\n    refresh : function(frm) {\n        if (!has_common(frappe.user_roles, [\"Administrator\", \"System Manager\"])) {\n            setTimeout(() => {                     \n                var bt = ['Invoice Discounting', 'Dunning', 'Maintenance Schedule', 'Payment Request', 'Payment', 'Subscription'];\n                bt.forEach(function(bt){\n                    frm.page.remove_inner_button(bt, 'Create');\n                });\n            },1);\n        }\n        set_lo(frm);\n    },\n\tproduct:function(frm){\n\t\tset_head(frm);\n\t}\t\t\t\n});\nvar set_lo = function(frm){\nif(frm.doc.__islocal){\n\tvar u = frappe.session.user;\n\tfrappe.call({\n\t\tmethod:\"frappe.client.get\",\n\t\targs: {\n\t\tdoctype:\"User\",\n\t\tfilters: {'email': u\n\t\t},\n\t\t},\n\tcallback: function(r) {\n\t\tcur_frm.set_value(\"prepared_by\", r.message[\"full_name\"]);\n\t}\n    });\n}\n};",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Customer",
  "enabled": 1,
  "modified": "2021-03-12 02:47:29.814713",
  "name": "Customer-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Customer', {\n\trefresh(frm) {\n\t\t// your code\n\t\t$('.indicator-column').hide();\n\t\tif (frappe.user_roles.indexOf(\"System Manager\")!=-1) {\n\t\t    $('.indicator-column').show();\n\t    }\n\t    set_lo(frm);\n\t},\n\tproduct:function(frm){\n\t\tset_head(frm);\n\t}\n});\nvar set_lo = function(frm){\nif(frm.doc.__islocal){\n\tvar u = frappe.session.user;\n\tfrappe.call({\n\t\tmethod:\"frappe.client.get\",\n\t\targs: {\n\t\tdoctype:\"User\",\n\t\tfilters: {'email': u\n\t\t},\n\t\t},\n\tcallback: function(r) {\n\t\tcur_frm.set_value(\"prepared_by\", r.message[\"full_name\"]);\n\t}\n    });\n}\n};",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Item",
  "enabled": 1,
  "modified": "2021-03-12 02:59:42.171092",
  "name": "Item-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Item', {\n\trefresh(frm) {\n\t\t// your code here\n\t\t$(document).on('mouseenter focus', '.btn-move,.btn-add', function(events){\n        $(this).prop('disabled', true);\n\t\t});\n\t\tif (frappe.user_roles.indexOf(\"System Manager\")!=-1) {\n\t\t    $(document).on('mouseenter focus', '.btn-move,.btn-add', function(events){\n            $(this).prop('disabled', false);\n\t\t    });\n\t\t}\n\t\tset_lo(frm);\n\t\t\n\t},\n\tproduct:function(frm){\n\t\tset_head(frm);\n\t}\t\n});\nvar set_lo = function(frm){\nif(frm.doc.__islocal){\n\tvar u = frappe.session.user;\n\tfrappe.call({\n\t\tmethod:\"frappe.client.get\",\n\t\targs: {\n\t\tdoctype:\"User\",\n\t\tfilters: {'email': u\n\t\t},\n\t\t},\n\tcallback: function(r) {\n\t\tcur_frm.set_value(\"prepared_by\", r.message[\"full_name\"]);\n\t}\n    });\n}\n};",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Supplier",
  "enabled": 1,
  "modified": "2021-03-12 02:50:01.336959",
  "name": "Supplier-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Supplier', {\n\trefresh(frm) {\n\t\t// your code \n\t\t$('.indicator-column').hide();\n\t\tif (frappe.user_roles.indexOf(\"System Manager\")!=-1) {\n\t\t    $('.indicator-column').show();\n\t    }\n\t    set_lo(frm);\n\t},\n\tproduct:function(frm){\n\t\tset_head(frm);\n\t}\n});\nvar set_lo = function(frm){\nif(frm.doc.__islocal){\n\tvar u = frappe.session.user;\n\tfrappe.call({\n\t\tmethod:\"frappe.client.get\",\n\t\targs: {\n\t\tdoctype:\"User\",\n\t\tfilters: {'email': u\n\t\t},\n\t\t},\n\tcallback: function(r) {\n\t\tcur_frm.set_value(\"prepared_by\", r.message[\"full_name\"]);\n\t}\n    });\n}\n};",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Stock Entry",
  "enabled": 1,
  "modified": "2021-03-12 06:28:34.513864",
  "name": "Stock Entry-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on(\"Stock Entry\", {\r\n\trefresh: function(frm){\r\n\t\tset_lo(frm);\r\n\t},\r\n\tproduct:function(frm){\r\n\t\tset_head(frm);\r\n\t}\t\t\t\r\n});\r\nvar set_lo = function(frm){\r\nif(frm.doc.__islocal){\r\n\tvar u = frappe.session.user;\r\n\tfrappe.call({\r\n\t\tmethod:\"frappe.client.get\",\r\n\t\targs: {\r\n\t\tdoctype:\"User\",\r\n\t\tfilters: {'email': u\r\n\t\t},\r\n\t\t},\r\n\tcallback: function(r) {\r\n\t\tcur_frm.set_value(\"prepared_by\", r.message[\"full_name\"]);\r\n\t}\r\n    });\r\n}\r\n};\r\nfrappe.ui.form.on('Stock Entry', \"validate\", function(frm) {\r\n        if(frm.doc.purpose==\"Material Issue\") { \r\n            if (!has_common(frappe.user_roles, [\"Administrator\", \"System Manager\"])) {\r\n                frappe.msgprint(__(\"Only Authorized Officer can make entry in Restricted Warehouse\"));\r\n                validated = false;\r\n            }\r\n        }\r\n        if(frm.doc.purpose==\"Material Receipt\") { \r\n            if (!has_common(frappe.user_roles, [\"Administrator\", \"System Manager\", \"Chief Accounting Officer\", \"Accounts Manager\", \"Accounts User\"])) {\r\n                frappe.msgprint(__(\"Only Authorized Officer can make entry in Restricted Warehouse\"));\r\n                validated = false;\r\n            }\r\n        }\r\n        if(frm.doc.purpose==\"Material Transfer\") {\r\n            if (!has_common(frappe.user_roles, [\"Administrator\", \"System Manager\", \"Chief Accounting Officer\", \"Accounts Manager\", \"Accounts User\"])) {\r\n                frappe.msgprint(__(\"Only Authorized Officer can make entry in Restricted Warehouse\"));\r\n                validated = false;\r\n            }\r\n        }\r\n        if(frm.doc.purpose==\"Manufacture\") {\r\n            if (!has_common(frappe.user_roles, [\"Administrator\", \"System Manager\", \"Chief Accounting Officer\", \"Accounts Manager\", \"Accounts User\"])) {\r\n                frappe.msgprint(__(\"Only Authorized Officer can make entry in Restricted Warehouse\"));\r\n                validated = false;\r\n            }\r\n        }\r\n        if(frm.doc.purpose==\"Repack\") {\r\n            if (!has_common(frappe.user_roles, [\"Administrator\", \"System Manager\", \"Chief Accounting Officer\", \"Accounts Manager\", \"Accounts User\"])) {\r\n                frappe.msgprint(__(\"Only Authorized Officer can make entry in Restricted Warehouse\"));\r\n                validated = false;\r\n            }\r\n        }\r\n        if(frm.doc.purpose==\"Send to Subcontractor\") {\r\n            if (!has_common(frappe.user_roles, [\"Administrator\", \"System Manager\"])) {\r\n                frappe.msgprint(__(\"Only Authorized Officer can make entry in Restricted Warehouse\"));\r\n                validated = false;\r\n            }\r\n        }\r\n        if(frm.doc.purpose==\"Material Transfer for Manufacture\") {\r\n            if (!has_common(frappe.user_roles, [\"Administrator\", \"System Manager\", \"Chief Accounting Officer\", \"Accounts Manager\", \"Accounts User\"])) {\r\n                frappe.msgprint(__(\"Only Authorized Officer can make entry in Restricted Warehouse\"));\r\n                validated = false;\r\n            }\r\n        }\r\n        if(frm.doc.purpose==\"Material Consumption for Manufacture\") {\r\n            if (!has_common(frappe.user_roles, [\"Administrator\", \"System Manager\", \"Chief Accounting Officer\", \"Accounts Manager\", \"Accounts User\"])) {\r\n                frappe.msgprint(__(\"Only Authorized Officer can make entry in Restricted Warehouse\"));\r\n                validated = false;\r\n            }\r\n        }\r\n});\r\n",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Journal Entry",
  "enabled": 1,
  "modified": "2021-03-12 06:15:34.880932",
  "name": "Journal Entry-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on(\"Journal Entry\", {\r\n\trefresh: function(frm){\r\n\t\tset_lo(frm);\r\n\t},\r\n\tproduct:function(frm){\r\n\t\tset_head(frm);\r\n\t}\t\t\t\r\n});\r\nvar set_lo = function(frm){\r\nif(frm.doc.__islocal){\r\n\tvar u = frappe.session.user;\r\n\tfrappe.call({\r\n\t\tmethod:\"frappe.client.get\",\r\n\t\targs: {\r\n\t\tdoctype:\"User\",\r\n\t\tfilters: {'email': u\r\n\t\t},\r\n\t\t},\r\n\tcallback: function(r) {\r\n\t\tcur_frm.set_value(\"prepared_by\", r.message[\"full_name\"]);\r\n\t}\r\n    });\r\n}\r\n};\r\nfrappe.ui.form.on('Journal Entry', \"validate\", function(frm) {\r\n\t    if(frm.doc.voucher_type==\"Journal Entry\") { \r\n            if (!has_common(frappe.user_roles, [\"Administrator\", \"System Manager\", \"Chief Accounting Officer\", \"Accounts Manager\", \"Accounts User\"])) {\r\n                frappe.msgprint(__(\"Only Authorized Officer can make entry in Restricted Journal Entry\"));\r\n                validated = false;\r\n            }\r\n        }\r\n        if(frm.doc.voucher_type==\"Inter Company Journal Entry\") { \r\n            if(frappe.user_roles.indexOf(\"JE Inter Company Journal Entry\")!=-1) {\r\n                \r\n            }\r\n            frappe.msgprint(__(\"Only Authorized Officer can make entry in Restricted Journal Entry\"));\r\n            validated = false;\r\n        }\r\n        if(frm.doc.voucher_type==\"Bank Entry\") {\r\n            if(frappe.user_roles.indexOf(\"JE Bank Entry\")!=-1) {\r\n                \r\n            }\r\n            frappe.msgprint(__(\"Only Authorized Officer can make entry in Restricted Journal Entry\"));\r\n            validated = false;\r\n        }\r\n        if(frm.doc.voucher_type==\"Cash Entry\") {\r\n            if(frappe.user_roles.indexOf(\"JE Cash Entry\")!=-1) {\r\n                \r\n            }\r\n            frappe.msgprint(__(\"Only Authorized Officer can make entry in Restricted Journal Entry\"));\r\n            validated = false;\r\n        }\r\n        if(frm.doc.voucher_type==\"Credit Card Entry\") {\r\n            if(frappe.user_roles.indexOf(\"JE Credit Card Entry\")!=-1) {\r\n                \r\n            }\r\n            frappe.msgprint(__(\"Only Authorized Officer can make entry in Restricted Journal Entry\"));\r\n            validated = false;\r\n        }\r\n        if(frm.doc.voucher_type==\"Debit Note\") {\r\n            if(frappe.user_roles.indexOf(\"JE Debit Note\")!=-1) {\r\n                \r\n            }\r\n            frappe.msgprint(__(\"Only Authorized Officer can make entry in Restricted Journal Entry\"));\r\n            validated = false;\r\n        }\r\n        if(frm.doc.voucher_type==\"Credit Note\") {\r\n            if(frappe.user_roles.indexOf(\"JE Credit Note\")!=-1) {\r\n                \r\n            }\r\n            frappe.msgprint(__(\"Only Authorized Officer can make entry in Restricted Journal Entry\"));\r\n            validated = false;\r\n        }\r\n        if(frm.doc.voucher_type==\"Contra Entry\") {\r\n            if(frappe.user_roles.indexOf(\"JE Contra Entry\")!=-1) {\r\n                \r\n            }\r\n            frappe.msgprint(__(\"Only Authorized Officer can make entry in Restricted Journal Entry\"));\r\n            validated = false;\r\n        }\r\n\t\tif(frm.doc.voucher_type==\"Exercise Entry\") {\r\n            if(frappe.user_roles.indexOf(\"JE Exercise Entry\")!=-1) {\r\n                \r\n            }\r\n            frappe.msgprint(__(\"Only Authorized Officer can make entry in Restricted Journal Entry\"));\r\n            validated = false;\r\n        }\r\n\t\tif(frm.doc.voucher_type==\"Write Off Entry\") {\r\n            if(frappe.user_roles.indexOf(\"JE Write Off Entry\")!=-1) {\r\n                \r\n            }\r\n            frappe.msgprint(__(\"Only Authorized Officer can make entry in Restricted Journal Entry\"));\r\n            validated = false;\r\n        }\r\n\t\tif(frm.doc.voucher_type==\"Opening Entry\") {\r\n            if(frappe.user_roles.indexOf(\"JE Opening Entry\")!=-1) {\r\n                \r\n            }\r\n            frappe.msgprint(__(\"Only Authorized Officer can make entry in Restricted Journal Entry\"));\r\n            validated = false;\r\n        }\r\n\t\tif(frm.doc.voucher_type==\"Depreciation Entry\") {\r\n            if(frappe.user_roles.indexOf(\"JE Depreciation Entry\")!=-1) {\r\n                \r\n            }\r\n            frappe.msgprint(__(\"Only Authorized Officer can make entry in Restricted Journal Entry\"));\r\n            validated = false;\r\n        }\r\n\t\tif(frm.doc.voucher_type==\"Exchange Rate Revaluation\") {\r\n            if(frappe.user_roles.indexOf(\"JE Exchange Rate Revaluation\")!=-1) {\r\n                \r\n            }\r\n            frappe.msgprint(__(\"Only Authorized Officer can make entry in Restricted Journal Entry\"));\r\n            validated = false;\r\n        }\r\n\t\tif(frm.doc.voucher_type==\"Deferred Revenue\") {\r\n            if(frappe.user_roles.indexOf(\"JE Deferred Revenue\")!=-1) {\r\n                \r\n            }\r\n            frappe.msgprint(__(\"Only Authorized Officer can make entry in Restricted Journal Entry\"));\r\n            validated = false;\r\n        }\r\n\t\tif(frm.doc.voucher_type==\"Deferred Expense\") {\r\n            if(frappe.user_roles.indexOf(\"JE Deferred Expense\")!=-1) {\r\n                \r\n            }\r\n            frappe.msgprint(__(\"Only Authorized Officer can make entry in Restricted Journal Entry\"));\r\n            validated = false;\r\n        }\r\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Employee",
  "enabled": 1,
  "modified": "2021-03-12 02:55:59.159544",
  "name": "Employee-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Employee', {\n\trefresh: function(frm){\n\t\tset_lo(frm);\n\t},\n\tproduct:function(frm){\n\t\tset_head(frm);\n\t}\n});\n\nfrappe.ui.form.on(\"Employee\", \"salary_base\", function(frm, cdt, cdn) {\n       var d = locals[cdt][cdn];\n       frappe.model.set_value(cdt, cdn, \"hour_rate\", Math.round(d.salary_base/192));\n});\nvar set_lo = function(frm){\nif(frm.doc.__islocal){\n\tvar u = frappe.session.user;\n\tfrappe.call({\n\t\tmethod:\"frappe.client.get\",\n\t\targs: {\n\t\tdoctype:\"User\",\n\t\tfilters: {'email': u\n\t\t},\n\t\t},\n\tcallback: function(r) {\n\t\tcur_frm.set_value(\"prepared_by\", r.message[\"full_name\"]);\n\t}\n    });\n}\n};",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Sales Order",
  "enabled": 1,
  "modified": "2021-03-13 08:16:44.277934",
  "name": "Sales Order-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on(\"Sales Order\", {\r\n    refresh : function(frm) {\r\n\t\tset_lo(frm);\r\n        if (!has_common(frappe.user_roles, [\"Administrator\", \"System Manager\"])) {\r\n            setTimeout(() => {\r\n                // frm.page.clear_menu()\r\n                var bt = ['Pick List', 'Work Order', 'Material Request', 'Request for Raw Materials', 'Purchase Order', 'Payment Request', 'Payment', 'Project', 'Subscription'];\r\n                bt.forEach(function(bt){\r\n                    frm.page.remove_inner_button(bt, 'Create');\r\n                });\r\n            },1);\r\n        }\r\n    },\r\n\tproduct:function(frm){\r\n\t\tset_head(frm);\r\n\t},\r\n    onload: function(frm) {\r\n        var today = new Date();\r\n        var dd = today.getDate();\r\n            if(frm.doc.__islocal){\r\n            if(dd>14) {\r\n                frm.set_value(\"payment_terms_template\",\"NET3030\");\r\n            }\r\n            if(dd<15) {\r\n                frm.set_value(\"payment_terms_template\",\"NET3015\");\r\n            }\r\n            }\r\n        }\r\n});\r\nfrappe.ui.form.on(\"Sales Order\", \"transaction_date\", function(frm, cdt, cdn) {\r\n       var d = locals[cdt][cdn];\r\n        var today = new Date(d.transaction_date);\r\n        var dd = today.getDate();\r\n        if(frm.doc.__islocal){\r\n            if(dd>14) {\r\n                frm.set_value(\"payment_terms_template\",\"NET3030\");\r\n            }\r\n            if(dd<15) {\r\n                frm.set_value(\"payment_terms_template\",\"NET3015\");\r\n            }\r\n        }\r\n});\r\nvar set_lo = function(frm){\r\nif(frm.doc.__islocal){\r\n\tvar u = frappe.session.user;\r\n\tfrappe.call({\r\n\t\tmethod:\"frappe.client.get\",\r\n\t\targs: {\r\n\t\tdoctype:\"User\",\r\n\t\tfilters: {'email': u\r\n\t\t},\r\n\t\t},\r\n\tcallback: function(r) {\r\n\t\tcur_frm.set_value(\"prepared_by\", r.message[\"full_name\"]);\r\n\t}\r\n    })\r\n}\r\n}",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Purchase Order",
  "enabled": 1,
  "modified": "2021-03-13 08:21:00.997477",
  "name": "Purchase Order-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on(\"Purchase Order\", {\r\n    refresh : function(frm) {\r\n\t\tset_lo(frm);\r\n        if (!has_common(frappe.user_roles, [\"Administrator\", \"System Manager\"])) {\r\n            setTimeout(() => {\r\n                var bt = ['Payment Request', 'Payment', 'Subscription'];\r\n                bt.forEach(function(bt){\r\n                    frm.page.remove_inner_button(bt, 'Create');\r\n                });\r\n            },1);\r\n        }\r\n    },\r\n\tproduct:function(frm){\r\n\t\tset_head(frm);\r\n\t},\r\n    onload: function(frm) {\r\n        if(frm.doc.__islocal){\r\n        frm.set_value(\"payment_terms_template\",\"NET30NOW\");\r\n        }\r\n    }\r\n});\r\nfrappe.ui.form.on(\"Purchase Order\", \"supplier\", function(frm, cdt, cdn) {\r\n       var d = locals[cdt][cdn];\r\n       if(frm.doc.__islocal){\r\n       frappe.model.set_value(cdt, cdn, \"set_warehouse\",\"\");\r\n       if (d.supplier == \"C\u00d4NG TY TNHH POLYSTYRENE VI\u1ec6T NAM\") {\r\n           frappe.model.set_value(cdt, cdn, \"set_warehouse\",\"Kho Nguy\u00ean Li\u1ec7u C\u00f4ng Ty - PLP\");\r\n       }\r\n       }\r\n});\r\nvar set_lo = function(frm){\r\nif(frm.doc.__islocal){\r\n\tvar u = frappe.session.user;\r\n\tfrappe.call({\r\n\t\tmethod:\"frappe.client.get\",\r\n\t\targs: {\r\n\t\tdoctype:\"User\",\r\n\t\tfilters: {'email': u\r\n\t\t},\r\n\t\t},\r\n\tcallback: function(r) {\r\n\t\tcur_frm.set_value(\"prepared_by\", r.message[\"full_name\"]);\r\n\t}\r\n    });\r\n}\r\n};",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Work Order",
  "enabled": 1,
  "modified": "2021-03-13 08:17:06.297870",
  "name": "Work Order-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on(\"Work Order\", {\r\n\trefresh: function(frm){\r\n\t\tset_lo(frm);\r\n\t},\r\n\tproduct:function(frm){\r\n\t\tset_head(frm);\r\n\t}\t\t\t\r\n});\r\nvar set_lo = function(frm){\r\nif(frm.doc.__islocal){\r\n\tvar u = frappe.session.user;\r\n\tfrappe.call({\r\n\t\tmethod:\"frappe.client.get\",\r\n\t\targs: {\r\n\t\tdoctype:\"User\",\r\n\t\tfilters: {'email': u\r\n\t\t},\r\n\t\t},\r\n\tcallback: function(r) {\r\n\t\tcur_frm.set_value(\"prepared_by\", r.message[\"full_name\"]);\r\n\t}\r\n    });\r\n}\r\n};\r\nfrappe.ui.form.on(\"Work Order\", \"production_item\", function(frm, cdt, cdn) {\r\n       var d = locals[cdt][cdn];\r\n       if(frm.doc.__islocal){\r\n       frappe.model.set_value(cdt, cdn, \"source_warehouse\",\"\");\r\n       if (d.production_item==\"TP-NL-EPS-VNPS-S\") {\r\n            frappe.model.set_value(cdt, cdn, \"source_warehouse\",\"Kho WIP BP S\u1ea3n Xu\u1ea5t - PLP\");\r\n            frappe.model.set_value(cdt, cdn, \"wip_warehouse\",\"Kho WIP BP S\u1ea3n Xu\u1ea5t - PLP\");\r\n            frappe.model.set_value(cdt, cdn, \"fg_warehouse\",\"Kho Th\u00e0nh Ph\u1ea9m BP S\u1ea3n Xu\u1ea5t - PLP\");\r\n            frappe.model.set_value(cdt, cdn, \"allow_alternative_item\",0);\r\n            frappe.model.set_value(cdt, cdn, \"update_consumed_material_cost_in_project\",1);\r\n            frappe.model.set_value(cdt, cdn, \"use_multi_level_bom\",1);\r\n       }\r\n       else if (d.production_item==\"TP-NL-EPS-VNPS-SS\") {\r\n            frappe.model.set_value(cdt, cdn, \"source_warehouse\",\"Kho WIP BP S\u1ea3n Xu\u1ea5t - PLP\");\r\n            frappe.model.set_value(cdt, cdn, \"wip_warehouse\",\"Kho WIP BP S\u1ea3n Xu\u1ea5t - PLP\");\r\n            frappe.model.set_value(cdt, cdn, \"fg_warehouse\",\"Kho Th\u00e0nh Ph\u1ea9m BP S\u1ea3n Xu\u1ea5t - PLP\");\r\n            frappe.model.set_value(cdt, cdn, \"allow_alternative_item\",0);\r\n            frappe.model.set_value(cdt, cdn, \"update_consumed_material_cost_in_project\",1);\r\n            frappe.model.set_value(cdt, cdn, \"use_multi_level_bom\",1);\r\n       }\r\n       else if (d.production_item) {\r\n            frappe.model.set_value(cdt, cdn, \"source_warehouse\",\"Kho Th\u00e0nh Ph\u1ea9m BP S\u1ea3n Xu\u1ea5t - PLP\");\r\n            frappe.model.set_value(cdt, cdn, \"wip_warehouse\",\"Kho WIP BP S\u1ea3n Xu\u1ea5t - PLP\");\r\n            frappe.model.set_value(cdt, cdn, \"fg_warehouse\",\"Kho Th\u00e0nh Ph\u1ea9m BP S\u1ea3n Xu\u1ea5t - PLP\");\r\n            frappe.model.set_value(cdt, cdn, \"allow_alternative_item\",1);\r\n            frappe.model.set_value(cdt, cdn, \"update_consumed_material_cost_in_project\",1);\r\n            frappe.model.set_value(cdt, cdn, \"use_multi_level_bom\",0);\r\n       }\r\n       }\r\n});",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Delivery Note",
  "enabled": 1,
  "modified": "2021-03-12 02:28:37.676207",
  "name": "Delivery Note-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on('Delivery Note', {\r\n\trefresh : function(frm) {\r\n\t\tset_lo(frm);\r\n\t\tif (!has_common(frappe.user_roles, [\"Administrator\", \"System Manager\"])) {\r\n            setTimeout(() => {\r\n            // frm.page.clear_menu()\r\n                var bt = ['Shipment', 'Installation Note', 'Subscription', 'Delivery Trip', 'Pick List'];\r\n                bt.forEach(function(bt){\r\n                    frm.page.remove_inner_button(bt, 'Create');\r\n                });\r\n            },1);\r\n        }\r\n    },\r\n\tproduct:function(frm){\r\n\t\tset_head(frm);\r\n\t}\r\n});\r\nfrappe.ui.form.on(\"Delivery Note\", \"vehicle\", function(frm, cdt, cdn) {\r\n       var d = locals[cdt][cdn];\r\n       if (d.vehicle) {\r\n           frappe.model.set_value(cdt, cdn, \"vehicle_no\", d.vehicle);\r\n           frm.refresh_field('vehicle_no');\r\n       }\r\n});\r\nvar set_lo = function(frm){\r\nif(frm.doc.__islocal){\r\n\tvar u = frappe.session.user;\r\n\tfrappe.call({\r\n\t\tmethod:\"frappe.client.get\",\r\n\t\targs: {\r\n\t\tdoctype:\"User\",\r\n\t\tfilters: {'email': u\r\n\t\t},\r\n\t\t},\r\n\tcallback: function(r) {\r\n\t\tcur_frm.set_value(\"prepared_by\", r.message[\"full_name\"]);\r\n\t}\r\n    });\r\n}\r\n};",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Production Plan",
  "enabled": 1,
  "modified": "2021-03-12 03:03:59.075506",
  "name": "Production Plan-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on(\"Production Plan\", {\r\n\trefresh: function(frm){\r\n\t\tset_lo(frm);\r\n\t},\r\n\tproduct:function(frm){\r\n\t\tset_head(frm);\r\n\t}\t\t\t\r\n});\r\nvar set_lo = function(frm){\r\nif(frm.doc.__islocal){\r\n\tvar u = frappe.session.user;\r\n\tfrappe.call({\r\n\t\tmethod:\"frappe.client.get\",\r\n\t\targs: {\r\n\t\tdoctype:\"User\",\r\n\t\tfilters: {'email': u\r\n\t\t},\r\n\t\t},\r\n\tcallback: function(r) {\r\n\t\tcur_frm.set_value(\"prepared_by\", r.message[\"full_name\"]);\r\n\t}\r\n    });\r\n}\r\n};",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "BOM",
  "enabled": 1,
  "modified": "2021-03-12 03:06:48.556414",
  "name": "BOM-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on(\"BOM\", {\r\n\trefresh: function(frm){\r\n\t\tset_lo(frm);\r\n\t},\r\n\tproduct:function(frm){\r\n\t\tset_head(frm);\r\n\t}\t\t\t\r\n});\r\nvar set_lo = function(frm){\r\nif(frm.doc.__islocal){\r\n\tvar u = frappe.session.user;\r\n\tfrappe.call({\r\n\t\tmethod:\"frappe.client.get\",\r\n\t\targs: {\r\n\t\tdoctype:\"User\",\r\n\t\tfilters: {'email': u\r\n\t\t},\r\n\t\t},\r\n\tcallback: function(r) {\r\n\t\tcur_frm.set_value(\"prepared_by\", r.message[\"full_name\"]);\r\n\t}\r\n    });\r\n}\r\n};",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Payment Entry",
  "enabled": 1,
  "modified": "2021-03-12 03:08:43.505148",
  "name": "Payment Entry-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on(\"Payment Entry\", {\r\n\trefresh: function(frm){\r\n\t\tset_lo(frm);\r\n\t},\r\n\tproduct:function(frm){\r\n\t\tset_head(frm);\r\n\t}\t\t\t\r\n});\r\nvar set_lo = function(frm){\r\nif(frm.doc.__islocal){\r\n\tvar u = frappe.session.user;\r\n\tfrappe.call({\r\n\t\tmethod:\"frappe.client.get\",\r\n\t\targs: {\r\n\t\tdoctype:\"User\",\r\n\t\tfilters: {'email': u\r\n\t\t},\r\n\t\t},\r\n\tcallback: function(r) {\r\n\t\tcur_frm.set_value(\"prepared_by\", r.message[\"full_name\"]);\r\n\t}\r\n    });\r\n}\r\n};",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Asset",
  "enabled": 1,
  "modified": "2021-03-12 03:10:42.135569",
  "name": "Asset-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on(\"Asset\", {\r\n\trefresh: function(frm){\r\n\t\tset_lo(frm);\r\n\t},\r\n\tproduct:function(frm){\r\n\t\tset_head(frm);\r\n\t}\t\t\t\r\n});\r\nvar set_lo = function(frm){\r\nif(frm.doc.__islocal){\r\n\tvar u = frappe.session.user;\r\n\tfrappe.call({\r\n\t\tmethod:\"frappe.client.get\",\r\n\t\targs: {\r\n\t\tdoctype:\"User\",\r\n\t\tfilters: {'email': u\r\n\t\t},\r\n\t\t},\r\n\tcallback: function(r) {\r\n\t\tcur_frm.set_value(\"prepared_by\", r.message[\"full_name\"]);\r\n\t}\r\n    });\r\n}\r\n};",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Asset Category",
  "enabled": 1,
  "modified": "2021-03-12 03:12:34.789679",
  "name": "Asset Category-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on(\"Asset Category\", {\r\n\trefresh: function(frm){\r\n\t\tset_lo(frm);\r\n\t},\r\n\tproduct:function(frm){\r\n\t\tset_head(frm);\r\n\t}\t\t\t\r\n});\r\nvar set_lo = function(frm){\r\nif(frm.doc.__islocal){\r\n\tvar u = frappe.session.user;\r\n\tfrappe.call({\r\n\t\tmethod:\"frappe.client.get\",\r\n\t\targs: {\r\n\t\tdoctype:\"User\",\r\n\t\tfilters: {'email': u\r\n\t\t},\r\n\t\t},\r\n\tcallback: function(r) {\r\n\t\tcur_frm.set_value(\"prepared_by\", r.message[\"full_name\"]);\r\n\t}\r\n    });\r\n}\r\n};",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Vehicle",
  "enabled": 1,
  "modified": "2021-03-12 03:14:17.560357",
  "name": "Vehicle-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on(\"Vehicle\", {\r\n\trefresh: function(frm){\r\n\t\tset_lo(frm);\r\n\t},\r\n\tproduct:function(frm){\r\n\t\tset_head(frm);\r\n\t}\t\t\t\r\n});\r\nvar set_lo = function(frm){\r\nif(frm.doc.__islocal){\r\n\tvar u = frappe.session.user;\r\n\tfrappe.call({\r\n\t\tmethod:\"frappe.client.get\",\r\n\t\targs: {\r\n\t\tdoctype:\"User\",\r\n\t\tfilters: {'email': u\r\n\t\t},\r\n\t\t},\r\n\tcallback: function(r) {\r\n\t\tcur_frm.set_value(\"prepared_by\", r.message[\"full_name\"]);\r\n\t}\r\n    });\r\n}\r\n};",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Vehicle Log",
  "enabled": 1,
  "modified": "2021-03-12 03:15:46.029842",
  "name": "Vehicle Log-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on(\"Vehicle Log\", {\r\n\trefresh: function(frm){\r\n\t\tset_lo(frm);\r\n\t},\r\n\tproduct:function(frm){\r\n\t\tset_head(frm);\r\n\t}\t\t\t\r\n});\r\nvar set_lo = function(frm){\r\nif(frm.doc.__islocal){\r\n\tvar u = frappe.session.user;\r\n\tfrappe.call({\r\n\t\tmethod:\"frappe.client.get\",\r\n\t\targs: {\r\n\t\tdoctype:\"User\",\r\n\t\tfilters: {'email': u\r\n\t\t},\r\n\t\t},\r\n\tcallback: function(r) {\r\n\t\tcur_frm.set_value(\"prepared_by\", r.message[\"full_name\"]);\r\n\t}\r\n    });\r\n}\r\n};",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Material Request",
  "enabled": 1,
  "modified": "2021-03-12 03:18:04.315627",
  "name": "Material Request-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on(\"Material Request\", {\r\n\trefresh: function(frm){\r\n\t\tset_lo(frm);\r\n\t},\r\n\tproduct:function(frm){\r\n\t\tset_head(frm);\r\n\t}\t\t\t\r\n});\r\nvar set_lo = function(frm){\r\nif(frm.doc.__islocal){\r\n\tvar u = frappe.session.user;\r\n\tfrappe.call({\r\n\t\tmethod:\"frappe.client.get\",\r\n\t\targs: {\r\n\t\tdoctype:\"User\",\r\n\t\tfilters: {'email': u\r\n\t\t},\r\n\t\t},\r\n\tcallback: function(r) {\r\n\t\tcur_frm.set_value(\"prepared_by\", r.message[\"full_name\"]);\r\n\t}\r\n    });\r\n}\r\n};",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Purchase Receipt",
  "enabled": 1,
  "modified": "2021-03-12 03:19:34.774408",
  "name": "Purchase Receipt-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on(\"Purchase Receipt\", {\r\n\trefresh: function(frm){\r\n\t\tset_lo(frm);\r\n\t},\r\n\tproduct:function(frm){\r\n\t\tset_head(frm);\r\n\t}\t\t\t\r\n});\r\nvar set_lo = function(frm){\r\nif(frm.doc.__islocal){\r\n\tvar u = frappe.session.user;\r\n\tfrappe.call({\r\n\t\tmethod:\"frappe.client.get\",\r\n\t\targs: {\r\n\t\tdoctype:\"User\",\r\n\t\tfilters: {'email': u\r\n\t\t},\r\n\t\t},\r\n\tcallback: function(r) {\r\n\t\tcur_frm.set_value(\"prepared_by\", r.message[\"full_name\"]);\r\n\t}\r\n    });\r\n}\r\n};",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Pick List",
  "enabled": 1,
  "modified": "2021-03-12 08:02:50.039854",
  "name": "Pick List-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on(\"Pick List\", {\r\n\trefresh: function(frm){\r\n\t\tset_lo(frm);\r\n\t},\r\n\tproduct:function(frm){\r\n\t\tset_head(frm);\r\n\t}\t\t\t\r\n});\r\nvar set_lo = function(frm){\r\nif(frm.doc.__islocal){\r\n\tvar u = frappe.session.user;\r\n\tfrappe.call({\r\n\t\tmethod:\"frappe.client.get\",\r\n\t\targs: {\r\n\t\tdoctype:\"User\",\r\n\t\tfilters: {'email': u\r\n\t\t},\r\n\t\t},\r\n\tcallback: function(r) {\r\n\t\tcur_frm.set_value(\"prepared_by\", r.message[\"full_name\"]);\r\n\t}\r\n    });\r\n}\r\n};",
  "view": "Form"
 },
 {
  "docstatus": 0,
  "doctype": "Client Script",
  "dt": "Delivery Trip",
  "enabled": 1,
  "modified": "2021-03-12 08:03:57.571876",
  "name": "Delivery Trip-Client",
  "parent": null,
  "parentfield": null,
  "parenttype": null,
  "script": "frappe.ui.form.on(\"Delivery Trip\", {\r\n\trefresh: function(frm){\r\n\t\tset_lo(frm);\r\n\t},\r\n\tproduct:function(frm){\r\n\t\tset_head(frm);\r\n\t}\t\t\t\r\n});\r\nvar set_lo = function(frm){\r\nif(frm.doc.__islocal){\r\n\tvar u = frappe.session.user;\r\n\tfrappe.call({\r\n\t\tmethod:\"frappe.client.get\",\r\n\t\targs: {\r\n\t\tdoctype:\"User\",\r\n\t\tfilters: {'email': u\r\n\t\t},\r\n\t\t},\r\n\tcallback: function(r) {\r\n\t\tcur_frm.set_value(\"prepared_by\", r.message[\"full_name\"]);\r\n\t}\r\n    });\r\n}\r\n};",
  "view": "Form"
 }
]